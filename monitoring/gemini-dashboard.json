{
  "displayName": "Pegasus Gemini 3 Pro - Production Monitoring",
  "mosaicLayout": {
    "columns": 12,
    "tiles": [
      {
        "width": 6,
        "height": 4,
        "widget": {
          "title": "Gemini 3 Pro - Success Rate",
          "xyChart": {
            "chartOptions": {
              "mode": "COLOR"
            },
            "dataSets": [
              {
                "timeSeriesQuery": {
                  "prometheusQuery": "rate(pegasus_thinking_requests_total{model=\"gemini-3-pro-preview\", status=\"success\"}[5m]) / (rate(pegasus_thinking_requests_total{model=\"gemini-3-pro-preview\"}[5m]) + 0.001) * 100",
                  "unitOverride": "percent"
                },
                "plotType": "LINE",
                "targetAxis": "Y1"
              }
            ],
            "thresholds": [
              {
                "value": 98.0,
                "label": "SLO Threshold (98%)"
              }
            ],
            "yAxis": {
              "label": "Success Rate (%)",
              "scale": "LINEAR"
            }
          }
        }
      },
      {
        "xPos": 6,
        "width": 6,
        "height": 4,
        "widget": {
          "title": "Gemini 3 Pro - Latency (p50, p95, p99)",
          "xyChart": {
            "chartOptions": {
              "mode": "COLOR"
            },
            "dataSets": [
              {
                "timeSeriesQuery": {
                  "prometheusQuery": "histogram_quantile(0.50, rate(pegasus_thinking_duration_seconds_avg{model=\"gemini-3-pro-preview\"}[5m]))",
                  "unitOverride": "s"
                },
                "plotType": "LINE",
                "targetAxis": "Y1",
                "legendTemplate": "p50"
              },
              {
                "timeSeriesQuery": {
                  "prometheusQuery": "histogram_quantile(0.95, rate(pegasus_thinking_duration_seconds_avg{model=\"gemini-3-pro-preview\"}[5m]))",
                  "unitOverride": "s"
                },
                "plotType": "LINE",
                "targetAxis": "Y1",
                "legendTemplate": "p95"
              },
              {
                "timeSeriesQuery": {
                  "prometheusQuery": "histogram_quantile(0.99, rate(pegasus_thinking_duration_seconds_avg{model=\"gemini-3-pro-preview\"}[5m]))",
                  "unitOverride": "s"
                },
                "plotType": "LINE",
                "targetAxis": "Y1",
                "legendTemplate": "p99"
              }
            ],
            "thresholds": [
              {
                "value": 45.0,
                "label": "Target p95 (45s)"
              }
            ],
            "yAxis": {
              "label": "Duration (seconds)",
              "scale": "LINEAR"
            }
          }
        }
      },
      {
        "yPos": 4,
        "width": 4,
        "height": 4,
        "widget": {
          "title": "Thinking Duration - Average (Last Hour)",
          "scorecard": {
            "timeSeriesQuery": {
              "prometheusQuery": "avg(pegasus_thinking_duration_seconds_avg{model=\"gemini-3-pro-preview\", status=\"success\"})",
              "unitOverride": "s"
            },
            "sparkChartView": {
              "sparkChartType": "SPARK_LINE"
            },
            "thresholds": [
              {
                "value": 30.0,
                "color": "YELLOW",
                "direction": "ABOVE"
              },
              {
                "value": 60.0,
                "color": "RED",
                "direction": "ABOVE"
              }
            ]
          }
        }
      },
      {
        "xPos": 4,
        "yPos": 4,
        "width": 4,
        "height": 4,
        "widget": {
          "title": "Thinking Duration - Max (Last Hour)",
          "scorecard": {
            "timeSeriesQuery": {
              "prometheusQuery": "max(pegasus_thinking_duration_seconds_max{model=\"gemini-3-pro-preview\", status=\"success\"})",
              "unitOverride": "s"
            },
            "sparkChartView": {
              "sparkChartType": "SPARK_BAR"
            },
            "thresholds": [
              {
                "value": 120.0,
                "color": "RED",
                "direction": "ABOVE"
              }
            ]
          }
        }
      },
      {
        "xPos": 8,
        "yPos": 4,
        "width": 4,
        "height": 4,
        "widget": {
          "title": "Total Requests (Last Hour)",
          "scorecard": {
            "timeSeriesQuery": {
              "prometheusQuery": "sum(pegasus_thinking_requests_total{model=\"gemini-3-pro-preview\"})",
              "unitOverride": "1"
            },
            "sparkChartView": {
              "sparkChartType": "SPARK_LINE"
            }
          }
        }
      },
      {
        "yPos": 8,
        "width": 12,
        "height": 4,
        "widget": {
          "title": "Error Breakdown by Type",
          "xyChart": {
            "chartOptions": {
              "mode": "COLOR"
            },
            "dataSets": [
              {
                "timeSeriesQuery": {
                  "prometheusQuery": "sum by (error_code) (rate(pegasus_thinking_errors_total{model=\"gemini-3-pro-preview\"}[5m]))",
                  "unitOverride": "1/s"
                },
                "plotType": "STACKED_AREA",
                "targetAxis": "Y1"
              }
            ],
            "yAxis": {
              "label": "Errors per second",
              "scale": "LINEAR"
            }
          }
        }
      },
      {
        "yPos": 12,
        "width": 6,
        "height": 4,
        "widget": {
          "title": "Generation Job Status Events",
          "xyChart": {
            "chartOptions": {
              "mode": "COLOR"
            },
            "dataSets": [
              {
                "timeSeriesQuery": {
                  "prometheusQuery": "sum by (status) (rate(pegasus_job_status_events_total{job_type=\"generation\"}[5m]))",
                  "unitOverride": "1/s"
                },
                "plotType": "STACKED_AREA",
                "targetAxis": "Y1"
              }
            ],
            "yAxis": {
              "label": "Events per second",
              "scale": "LINEAR"
            }
          }
        }
      },
      {
        "xPos": 6,
        "yPos": 12,
        "width": 6,
        "height": 4,
        "widget": {
          "title": "Generation Job Latency",
          "xyChart": {
            "chartOptions": {
              "mode": "COLOR"
            },
            "dataSets": [
              {
                "timeSeriesQuery": {
                  "prometheusQuery": "pegasus_job_latency_ms_avg{job_type=\"generation\"}",
                  "unitOverride": "ms"
                },
                "plotType": "LINE",
                "targetAxis": "Y1",
                "legendTemplate": "Average"
              },
              {
                "timeSeriesQuery": {
                  "prometheusQuery": "pegasus_job_latency_ms_max{job_type=\"generation\"}",
                  "unitOverride": "ms"
                },
                "plotType": "LINE",
                "targetAxis": "Y1",
                "legendTemplate": "Maximum"
              }
            ],
            "yAxis": {
              "label": "Duration (ms)",
              "scale": "LINEAR"
            }
          }
        }
      }
    ]
  }
}
